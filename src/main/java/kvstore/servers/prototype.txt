def handle_write():
    add a new task
    propagate the write # asynchronously
    block the current thread and reschedule
    only resume when all have replied the write
    write to the data store
    return to the caller

def handle_bwrite():
    add a new write task
    ask for acks
    block the current thread and reschedule
    only resume when all have replied the ack asking
    return


def handle_ack(): # This call is not synchronized
    upon receiving a new ack rquest
    check the time stamp of the task
    decrease the count of that task
    return

def ask_ack():
    add a new ack request
    block the current thread and reschedule
    call corresponding handle_ack
    return
